var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var network = require('../network');
var trainer = require('../trainer');
var Layer = require('../layer');
var Squash = require('../squash');
var Utils = (function () {
    function Utils() {
    }
    Utils.softMax = function (array) {
        // for all i ∈ array
        // sum = ∑ array[n]^e
        // i = î^e / sum
        // where the result ∑ array[0..n] = 1
        if (!array.length)
            return array;
        var sum = 0;
        for (var i = 0; i < array.length; i++) {
            array[i] = Math.exp(array[i]);
            sum += array[i];
        }
        for (var i = 0; i < array.length; i++)
            array[i] /= sum;
        return array;
    };
    Utils.softMaxSharpen = function (array, sharpen) {
        // for all i ∈ array
        // sum = ∑ array[n]^e
        // i = î^e / sum
        // where the result ∑ array[0..n] = 1
        if (sharpen === void 0) { sharpen = 1; }
        if (!array.length)
            return array;
        sharpen = sharpen || 1;
        var sum = 0;
        for (var i = 0; i < array.length; i++) {
            array[i] = Math.exp(sharpen * array[i]);
            sum += array[i];
        }
        if (sum != 0) {
            for (var i = 0; i < array.length; i++)
                array[i] /= sum;
        }
        else {
            var div = 1 / array.length;
            for (var i = 0; i < array.length; i++)
                array[i] = div;
        }
        return array;
    };
    Utils.getCosineSimilarity = function (arrayA, arrayB) {
        // http://en.wikipedia.org/wiki/Cosine_similarity
        // NTM: 3.3.1 (6)
        var dotPr = 0;
        var acumA = 0, acumB = 0;
        for (var i = 0; i < arrayA.length; i++) {
            dotPr += arrayA[i] * arrayB[i];
            acumA += arrayA[i] * arrayA[i];
            acumB += arrayB[i] * arrayB[i];
        }
        return dotPr / (Math.sqrt(acumA) * Math.sqrt(acumB) + .00005);
    };
    Utils.interpolateArray = function (output_inputA, inputB, g) {
        // 3.3.2 focus by location (7)
        var gInverted = 1 - g;
        for (var i = 0; i < output_inputA.length; i++)
            output_inputA[i] = output_inputA[i] * g + gInverted * inputB[i];
        return output_inputA;
    };
    // w_sharpWn
    Utils.sharpArray = function (output, wn, Y) {
        // 3.3.2 (9)
        var sum = 0;
        for (var i = 0; i < wn.length; i++) {
            wn[i] = Math.pow(wn[i], Y);
            sum += wn[i];
        }
        // ∀ a ∈ wn → a = a^Y / sum
        if (sum != 0) {
            for (var i = 0; i < wn.length; i++)
                output[i] = wn[i] / sum;
        }
        else {
            var div = 1 / wn.length;
            for (var i = 0; i < wn.length; i++)
                output[i] = div;
        }
    };
    //wn_shift
    Utils.scalarShifting = function (wg, shiftScalar) {
        // w~ 3.3.2 (8)
        var shiftings = new Float64Array(wg.length);
        var wn = new Float64Array(wg.length);
        var intPart = shiftScalar | 0;
        var decimalPart = shiftScalar - intPart;
        shiftings[intPart % shiftings.length] = 1 - decimalPart;
        shiftings[(intPart + 1) % shiftings.length] = decimalPart;
        for (var i = 0; i < wn.length; i++) {
            var acum = 0;
            for (var j = 0; j < wn.length; j++) {
                if ((i - j) < 0)
                    acum += wg[j] * shiftings[shiftings.length - Math.abs(i - j)];
                else
                    acum += wg[j] * shiftings[(i - j) % shiftings.length];
            }
            wn[i] = acum;
        }
        return wn;
    };
    Utils.normalizeShift = function (shift) {
        var sum = 0;
        for (var i = 0; i < shift.length; i++) {
            sum += shift[i];
        }
        for (var j = 0; j < shift.length; j++) {
            shift[j] /= sum;
        }
    };
    Utils.vectorInvertedShifting = function (wg, shiftings) {
        // w~ 3.3.2 (8)
        var ret = new Float64Array(wg.length);
        var corrimientoIndex = -((shiftings.length - 1) / 2) | 0;
        var circulantMatrix = Utils.buildCirculantMatrix(wg.length);
        for (var i = 0; i < wg.length; i++) {
            for (var x = 0; x < wg.length; x++) {
                var tmp = 0;
                for (var shift = 0; shift < shiftings.length; shift++) {
                    var matRow = i - x + corrimientoIndex + shift;
                    if (matRow < 0)
                        matRow += wg.length;
                    if (matRow < 0)
                        matRow += wg.length;
                    matRow %= wg.length;
                    tmp += wg[circulantMatrix[x][matRow]] * shiftings[shift];
                }
                ret[i] = tmp;
            }
        }
        wg.set(ret);
    };
    Utils.initRandomSoftmaxArray = function (array) {
        for (var i = 0; i < array.length; i++) {
            array[i] = Math.random();
        }
        Utils.softMax(array);
    };
    Utils.buildCirculantMatrix = function (length, offset) {
        if (offset === void 0) { offset = 0; }
        var ret = [];
        for (var i = 0; i < length; i++) {
            var arr = new Float64Array(length);
            ret.push(arr);
            for (var n = 0; n < length; n++) {
                arr[n] = ((i + n) % length);
            }
        }
        return ret;
    };
    return Utils;
})();
exports.Utils = Utils;
var NTM = (function (_super) {
    __extends(NTM, _super);
    function NTM(inputs, outputs, memBlocks, blockWidth, heads, hiddenSize) {
        // build the memory
        _super.call(this);
        this.heads = new Array();
        this.dirty = false;
        this.trainer = new trainer.Trainer(this);
        this.blocks = memBlocks;
        this.blockWidth = blockWidth;
        this.data = new Array(this.blocks);
        for (var index = 0; index < this.data.length; index++) {
            this.data[index] = new Float64Array(blockWidth);
        }
        this.clean();
        // build the network
        var inputLength = inputs + heads * memBlocks;
        this.inputValues = new Float64Array(inputLength);
        this.layers.input = this.inputLayer = new Layer.Layer(inputLength);
        this.hiddenLayer = new Layer.Layer(hiddenSize);
        this.layers.output = this.outputLayer = new Layer.Layer(outputs);
        this.inputLayer.project(this.hiddenLayer, Layer.Layer.connectionType.ALL_TO_ALL);
        this.hiddenLayer.project(this.outputLayer, Layer.Layer.connectionType.ALL_TO_ALL);
        var inputCounter = inputs - 1;
        for (var headIndex = 0; headIndex < heads; headIndex++) {
            this.addHead(this.inputValues.subarray(inputCounter, inputCounter + memBlocks));
            inputCounter += memBlocks;
        }
        this.optimized = false;
    }
    NTM.prototype.clean = function () {
        for (var location = 0; location < this.blocks; location++) {
            Utils.initRandomSoftmaxArray(this.data[location]);
        }
        this.dirty = false;
    };
    NTM.prototype.activate = function (input) {
        this.inputValues.set(input);
        this.inputLayer.activate(this.inputValues);
        this.hiddenLayer.activate();
        this.doTimeStep();
        return this.outputLayer.activate();
    };
    NTM.prototype.propagate = function (rate, target) {
        this.outputLayer.propagate(rate, target);
        for (var i = this.heads.length - 1; i >= 0; i--) {
            this.heads[i].layer.propagate(rate);
        }
        this.hiddenLayer.propagate(rate);
        this.dirty = true;
    };
    NTM.prototype.addHead = function (subArray) {
        var head = new Head(this, subArray);
        this.heads.push(head);
        return head;
    };
    NTM.prototype.doTimeStep = function () {
        var _this = this;
        this.heads.forEach(function (head, headIndex) {
            head.doTimeStep();
        });
        // parallelizable
        this.heads.forEach(function (head, headIndex) {
            _this.doErase(head.w_weightings, head.eraseGate);
        });
        // parallelizable
        this.heads.forEach(function (head, headIndex) {
            _this.doAdd(head.w_weightings, head.addGate);
        });
        //this.data.forEach((e) => e = Utils.softMax(e))
    };
    NTM.prototype.doAdd = function (w, addGate) {
        for (var n = 0; n < this.blocks; n++) {
            var M = this.data[n];
            for (var i = 0; i < this.blockWidth; i++) {
                M[i] += addGate[n] * w[i];
            }
        }
    };
    NTM.prototype.doErase = function (w, eraseGate) {
        for (var n = 0; n < this.blocks; n++) {
            var M = this.data[n];
            for (var i = 0; i < this.blockWidth; i++) {
                M[i] *= 1 - eraseGate[n] * w[i];
            }
        }
    };
    return NTM;
})(network.Network);
exports.NTM = NTM;
var Head = (function () {
    function Head(memory, destinationArray) {
        this.s_shiftingValue = null;
        this.prevFocus = 1;
        this.memory = memory;
        this.wc_focusedWeights = new Float64Array(this.memory.blocks);
        this.w_weightings = new Float64Array(this.memory.blocks);
        Utils.initRandomSoftmaxArray(this.w_weightings);
        this.shiftLength = 3; //this.memory.blocks;
        this.s_shiftingVector = new Float64Array(this.shiftLength);
        this.k_keys = new Float64Array(this.memory.blockWidth);
        this.ß_keyStrength = 0;
        this.eraseGate = new Float64Array(this.memory.blocks);
        this.addGate = new Float64Array(this.memory.blocks);
        this.readVector = destinationArray || new Float64Array(this.memory.blocks);
        this.layer = new Layer.Layer(this.memory.blockWidth + this.memory.blocks * 3 + Head.ADDITIONAL_INPUT_VALUES + this.shiftLength);
        this.memory.hiddenLayer.project(this.layer, Layer.Layer.connectionType.ALL_TO_ALL);
        this.layer.project(this.memory.outputLayer, Layer.Layer.connectionType.ALL_TO_ALL);
        this.circulantMatrix = Utils.buildCirculantMatrix(this.memory.blocks);
    }
    Head.prototype.readParams = function (activation) {
        this.ß_keyStrength = Squash.SOFTPLUS(activation[0]);
        this.g_interpolation = Squash.LOGISTIC(activation[1]);
        this.Y_focus = Math.log(Math.exp(activation[2] + 1)) + 1; //Squash.SOFTPLUS(activation[2]) + 1;
        var startAt = 3;
        for (var k = 0; k < this.k_keys.length; k++) {
            this.k_keys[k] = this.layer.list[k + startAt].activation;
        }
        startAt += this.k_keys.length;
        for (var k = 0; k < this.addGate.length; k++) {
            this.addGate[k] = this.layer.list[k + startAt].derivative;
        }
        startAt += this.addGate.length;
        for (var k = 0; k < this.eraseGate.length; k++) {
            this.eraseGate[k] = Squash.LOGISTIC(this.layer.list[k + startAt].activation);
        }
        startAt += this.eraseGate.length;
        for (var k = 0; k < this.shiftLength; k++) {
            this.s_shiftingVector[k] = this.layer.list[k + startAt].activation;
        }
        var M = this.memory.data;
        for (var i = 0; i < M.length; i++)
            this.wc_focusedWeights[i] = Utils.getCosineSimilarity(M[i], this.k_keys);
        // focus by location (interpolation)
        Utils.interpolateArray(this.wc_focusedWeights, this.w_weightings, this.g_interpolation);
        // convolutional shift
        this.doShiftings();
        // sharpening
        Utils.sharpArray(this.w_weightings, this.wc_focusedWeights, this.Y_focus);
        // since ∑ w = 1, we have to softmax the array
        Utils.softMax(this.w_weightings);
        /// we got wt!
    };
    Head.prototype.doShiftings = function () {
        Utils.softMax(this.s_shiftingVector);
        Utils.vectorInvertedShifting(this.wc_focusedWeights, this.s_shiftingVector);
    };
    Head.prototype.doTimeStep = function () {
        var activation = this.layer.activate();
        this.readParams(activation);
        for (var index = 0; index < this.memory.blocks; index++) {
            this.readVector[index] = 0;
            for (var cell = 0; cell < this.memory.blockWidth; cell++) {
                this.readVector[index] += this.memory.data[index][cell] * this.w_weightings[index];
            }
        }
    };
    Head.ADDITIONAL_INPUT_VALUES = 3;
    return Head;
})();
exports.Head = Head;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcmNoaXRlY3QvTlRNLnRzIl0sIm5hbWVzIjpbIlV0aWxzIiwiVXRpbHMuY29uc3RydWN0b3IiLCJVdGlscy5zb2Z0TWF4IiwiVXRpbHMuc29mdE1heFNoYXJwZW4iLCJVdGlscy5nZXRDb3NpbmVTaW1pbGFyaXR5IiwiVXRpbHMuaW50ZXJwb2xhdGVBcnJheSIsIlV0aWxzLnNoYXJwQXJyYXkiLCJVdGlscy5zY2FsYXJTaGlmdGluZyIsIlV0aWxzLm5vcm1hbGl6ZVNoaWZ0IiwiVXRpbHMudmVjdG9ySW52ZXJ0ZWRTaGlmdGluZyIsIlV0aWxzLmluaXRSYW5kb21Tb2Z0bWF4QXJyYXkiLCJVdGlscy5idWlsZENpcmN1bGFudE1hdHJpeCIsIk5UTSIsIk5UTS5jb25zdHJ1Y3RvciIsIk5UTS5jbGVhbiIsIk5UTS5hY3RpdmF0ZSIsIk5UTS5wcm9wYWdhdGUiLCJOVE0uYWRkSGVhZCIsIk5UTS5kb1RpbWVTdGVwIiwiTlRNLmRvQWRkIiwiTlRNLmRvRXJhc2UiLCJIZWFkIiwiSGVhZC5jb25zdHJ1Y3RvciIsIkhlYWQucmVhZFBhcmFtcyIsIkhlYWQuZG9TaGlmdGluZ3MiLCJIZWFkLmRvVGltZVN0ZXAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQU8sT0FBTyxXQUFXLFlBQVksQ0FBQyxDQUFDO0FBQ3ZDLElBQU8sT0FBTyxXQUFXLFlBQVksQ0FBQyxDQUFDO0FBQ3ZDLElBQU8sS0FBSyxXQUFXLFVBQVUsQ0FBQyxDQUFDO0FBR25DLElBQU8sTUFBTSxXQUFXLFdBQVcsQ0FBQyxDQUFDO0FBRXJDLElBQWEsS0FBSztJQUFsQkEsU0FBYUEsS0FBS0E7SUE2TGxCQyxDQUFDQTtJQTVMUUQsYUFBT0EsR0FBZEEsVUFBaURBLEtBQVFBO1FBQ3ZERSxvQkFBb0JBO1FBQ3BCQSxxQkFBcUJBO1FBQ3JCQSxnQkFBZ0JBO1FBQ2hCQSxxQ0FBcUNBO1FBRXJDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQTtZQUFD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QSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDZEEsSUFBSUEsSUFBSUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ2hFQSxJQUFJQTtvQkFDRkEsSUFBSUEsSUFBSUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7WUFDMURBLENBQUNBO1lBQ0RBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2ZBLENBQUNBO1FBRURBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO0lBQ1pBLENBQUNBO0lBRU1QLG9CQUFjQSxHQUFyQkEsVUFBc0JBLEtBQW1CQTtRQUN2Q1EsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDWkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsS0FBS0EsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7WUFDdENBLEdBQUdBLElBQUlBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxDQUFDQTtRQUNEQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxFQUFFQSxDQUFDQTtZQUN0Q0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0E7UUFDbEJBLENBQUNBO0lBQ0hBLENB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SUEsR0FBR0EsSUFBSUEsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFDbkNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEtBQUtBLEdBQUdBLENBQUNBLEVBQUVBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLEtBQUtBLEVBQUVBLEVBQUVBLENBQUNBO1lBQ3REQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxJQUFJQSxZQUFZQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtRQUVsREEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7UUFFYkEsQUFFQUEsb0JBRm9CQTtZQUVoQkEsV0FBV0EsR0FBR0EsTUFBTUEsR0FBR0EsS0FBS0EsR0FBR0EsU0FBU0EsQ0FBQ0E7UUFFN0NBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLFlBQVlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBO1FBRWpEQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQTtRQUNuRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsSUFBSUEsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDL0NBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBLElBQUlBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBO1FBSWpFQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxXQUFXQSxFQUFFQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQSxjQUFjQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtRQUNqRkEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsY0FBY0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFFbEZBLElBQUlBLFlBQVlBLEdBQUdBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBO1FBRTlCQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxTQUFTQSxHQUFHQSxDQUFDQSxFQUFFQSxTQUFTQSxHQUFHQSxLQUFLQSxFQUFFQSxTQUFTQSxFQUFFQSxFQUFFQSxDQUFDQTtZQUN2REEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsWUFBWUEsRUFBRUEsWUFBWUEsR0FBR0EsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDaEZBLFlBQVlBLElBQUlBLFNBQVNBLENBQUNBO1FBQzVCQSxDQUFDQTtRQUVEQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxLQUFLQSxDQUFDQTtJQUN6QkEsQ0FBQ0E7SUFFREQsbUJBQUtBLEdBQUxBO1FBQ0VFLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLEdBQUdBLENBQUNBLEVBQUVBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLFFBQVFBLEVBQUVBLEVBQUVBLENBQUNBO1lBQzFEQSxLQUFLQSxDQUFDQSxzQkFBc0JBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBO1FBQ3BEQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxLQUFLQSxDQUFDQTtJQUNyQkEsQ0FBQ0E7SUFFREYsc0JBQVFBLEdBQVJBLFVBQVNBLEtBQTZCQTtRQUNwQ0csSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsR0FBR0EsQ0FBTUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFFakNBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBO1FBQzNDQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxRQUFRQSxFQUFFQSxDQUFDQTtRQUU1QkEsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQ0E7UUFFbEJBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLFFBQVFBLEVBQUVBLENBQUNBO0lBQ3JDQSxDQUFDQTtJQUVESCx1QkFBU0EsR0FBVEEsVUFBVUEsSUFBWUEsRUFBRUEsTUFBOEJBO1FBQ3BESSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUN6Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7WUFDaERBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBQ3RDQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNqQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDcEJBLENBQUNBO0lBRURKLHFCQUFPQSxHQUFQQSxVQUFRQSxRQUFzQkE7UUFDNUJLLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLElBQUlBLENBQUNBLElBQUlBLEVBQUVBLFFBQVFBLENBQUNBLENBQUNBO1FBQ3BDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUN0QkEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDZEEsQ0FBQ0E7SUFFREws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TUEsR0FBR0EsTUFBTUEsQ0FBQ0E7UUFDckJBLElBQUlBLENBQUNBLGlCQUFpQkEsR0FBR0EsSUFBSUEsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFDOURBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLElBQUlBLFlBQVlBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRXpEQSxLQUFLQSxDQUFDQSxzQkFBc0JBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBO1FBRWhEQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxDQUFDQSxFQUFFQSxxQkFBcUJBO1FBRTNDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLEdBQUdBLElBQUlBLFlBQVlBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLENBQUNBO1FBQzNEQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxJQUFJQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtRQUN2REEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDdkJBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLFlBQVlBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBQ3REQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxJQUFJQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUNwREEsSUFBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsZ0JBQWdCQSxJQUFJQSxJQUFJQSxZQUFZQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUUzRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsdUJBQXVCQSxHQUFHQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQTtRQUVoSUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsS0FBS0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsY0FBY0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDbkZBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLFdBQVdBLEVBQUVBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLGNBQWNBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBO1FBRW5GQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxLQUFLQSxDQUFDQSxvQkFBb0JBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO0lBQ3hFQSxDQUFDQTtJQUVPRCx5QkFBVUEsR0FBbEJBLFVBQW1CQSxVQUF3QkE7UUFFekNFLElBQUlBLENBQUNBLGFBQWFBLEdBQUdBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBLFVBQVVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQ3BEQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUN0REEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBQ0EscUNBQXFDQTtRQUU5RkEsSUFBSUEsT0FBT0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDaEJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQzVDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxVQUFVQSxDQUFDQTtRQUMzREEsQ0FBQ0E7UUFFREEsT0FBT0EsSUFBSUEsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDOUJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQzdDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxVQUFVQSxDQUFDQTtRQUM1REEsQ0FBQ0E7UUFFREEsT0FBT0EsSUFBSUEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFDL0JBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQy9DQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFD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QUFDQSxJQUFJQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQTtZQUNyRkEsQ0FBQ0E7UUFDSEEsQ0FBQ0E7SUFDSEEsQ0FBQ0E7SUFoSE1KLDRCQUF1QkEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFpSHJDQSxXQUFDQTtBQUFEQSxDQWxIQSxBQWtIQ0EsSUFBQTtBQWxIWSxZQUFJLEdBQUosSUFrSFosQ0FBQSIsImZpbGUiOiJzcmMvYXJjaGl0ZWN0L05UTS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBuZXR3b3JrID0gcmVxdWlyZSgnLi4vbmV0d29yaycpO1xuaW1wb3J0IHRyYWluZXIgPSByZXF1aXJlKCcuLi90cmFpbmVyJyk7XG5pbXBvcnQgTGF5ZXIgPSByZXF1aXJlKCcuLi9sYXllcicpO1xuaW1wb3J0IG5ldXJvbiA9IHJlcXVpcmUoJy4uL25ldXJvbicpO1xuaW1wb3J0IFN5bmFwdGljID0gcmVxdWlyZSgnLi4vc3luYXB0aWMnKTtcbmltcG9ydCBTcXVhc2ggPSByZXF1aXJlKCcuLi9zcXVhc2gnKTtcblxuZXhwb3J0IGNsYXNzIFV0aWxzIHtcbiAgc3RhdGljIHNvZnRNYXg8VCBleHRlbmRzIFN5bmFwdGljLklOdW1lcmljQXJyYXk+KGFycmF5OiBUKTogVCB7XG4gICAgLy8gZm9yIGFsbCBpIOKIiCBhcnJheVxuICAgIC8vIHN1bSA9IOKIkSBhcnJheVtuXV5lXG4gICAgLy8gaSA9IMOuXmUgLyBzdW1cbiAgICAvLyB3aGVyZSB0aGUgcmVzdWx0IOKIkSBhcnJheVswLi5uXSA9IDFcblxuICAgIGlmICghYXJyYXkubGVuZ3RoKSByZXR1cm4gYXJyYXk7XG5cbiAgICB2YXIgc3VtID0gMDtcblxuICAgIC8vIHN1bSA9IOKIkSBhcnJheVtuXV5lXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyYXlbaV0gPSBNYXRoLmV4cChhcnJheVtpXSk7XG4gICAgICBzdW0gKz0gYXJyYXlbaV07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgYXJyYXlbaV0gLz0gc3VtO1xuXG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIHN0YXRpYyBzb2Z0TWF4U2hhcnBlbjxUIGV4dGVuZHMgU3luYXB0aWMuSU51bWVyaWNBcnJheT4oYXJyYXk6IFQsIHNoYXJwZW4gPSAxKTogVCB7XG4gICAgLy8gZm9yIGFsbCBpIOKIiCBhcnJheVxuICAgIC8vIHN1bSA9IOKIkSBhcnJheVtuXV5lXG4gICAgLy8gaSA9IMOuXmUgLyBzdW1cbiAgICAvLyB3aGVyZSB0aGUgcmVzdWx0IOKIkSBhcnJheVswLi5uXSA9IDFcblxuICAgIGlmICghYXJyYXkubGVuZ3RoKSByZXR1cm4gYXJyYXk7XG5cbiAgICBzaGFycGVuID0gc2hhcnBlbiB8fCAxO1xuXG4gICAgdmFyIHN1bSA9IDA7XG5cbiAgICAvLyBzdW0gPSDiiJEgYXJyYXlbbl1eZVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycmF5W2ldID0gTWF0aC5leHAoc2hhcnBlbiAqIGFycmF5W2ldKTtcbiAgICAgIHN1bSArPSBhcnJheVtpXTtcbiAgICB9XG5cbiAgICBpZiAoc3VtICE9IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIGFycmF5W2ldIC89IHN1bTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRpdiA9IDEgLyBhcnJheS5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSBhcnJheVtpXSA9IGRpdjtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cblxuXG4gIHN0YXRpYyBnZXRDb3NpbmVTaW1pbGFyaXR5KGFycmF5QTogU3luYXB0aWMuSU51bWVyaWNBcnJheSwgYXJyYXlCOiBTeW5hcHRpYy5JTnVtZXJpY0FycmF5KTogbnVtYmVyIHtcbiAgICAvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nvc2luZV9zaW1pbGFyaXR5XG4gICAgLy8gTlRNOiAzLjMuMSAoNilcbiAgICB2YXIgZG90UHIgPSAwO1xuXG4gICAgdmFyIGFjdW1BID0gMCwgYWN1bUIgPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRvdFByICs9IGFycmF5QVtpXSAqIGFycmF5QltpXTtcbiAgICAgIGFjdW1BICs9IGFycmF5QVtpXSAqIGFycmF5QVtpXTtcbiAgICAgIGFjdW1CICs9IGFycmF5QltpXSAqIGFycmF5QltpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG90UHIgLyAoTWF0aC5zcXJ0KGFjdW1BKSAqIE1hdGguc3FydChhY3VtQikgKyAuMDAwMDUpO1xuICB9XG5cbiAgc3RhdGljIGludGVycG9sYXRlQXJyYXkob3V0cHV0X2lucHV0QTogU3luYXB0aWMuSU51bWVyaWNBcnJheSwgaW5wdXRCOiBTeW5hcHRpYy5JTnVtZXJpY0FycmF5LCBnKSB7XG4gICAgLy8gMy4zLjIgZm9jdXMgYnkgbG9jYXRpb24gKDcpXG4gICAgdmFyIGdJbnZlcnRlZCA9IDEgLSBnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3V0cHV0X2lucHV0QS5sZW5ndGg7IGkrKylcbiAgICAgIG91dHB1dF9pbnB1dEFbaV0gPSBvdXRwdXRfaW5wdXRBW2ldICogZyArIGdJbnZlcnRlZCAqIGlucHV0QltpXTtcbiAgICByZXR1cm4gb3V0cHV0X2lucHV0QTtcbiAgfVxuICBcbiAgLy8gd19zaGFycFduXG4gIHN0YXRpYyBzaGFycEFycmF5KG91dHB1dDogU3luYXB0aWMuSU51bWVyaWNBcnJheSwgd246IFN5bmFwdGljLklOdW1lcmljQXJyYXksIFk6IG51bWJlcikge1xuICAgIC8vIDMuMy4yICg5KVxuICAgIHZhciBzdW0gPSAwO1xuXG4gICAgLy8g4oiAIGEg4oiIIHduIOKGkiBhID0gYV5ZXG4gICAgLy8gc3VtID0g4oiRIGFeWSBcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHduW2ldID0gTWF0aC5wb3cod25baV0sIFkpO1xuICAgICAgc3VtICs9IHduW2ldO1xuICAgIH1cblxuICAgIC8vIOKIgCBhIOKIiCB3biDihpIgYSA9IGFeWSAvIHN1bVxuICAgIGlmIChzdW0gIT0gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3bi5sZW5ndGg7IGkrKykgb3V0cHV0W2ldID0gd25baV0gLyBzdW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBkaXYgPSAxIC8gd24ubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3bi5sZW5ndGg7IGkrKykgb3V0cHV0W2ldID0gZGl2O1xuICAgIH1cbiAgfVxuICBcbiAgLy93bl9zaGlmdFxuICBzdGF0aWMgc2NhbGFyU2hpZnRpbmcod2c6IFN5bmFwdGljLklOdW1lcmljQXJyYXksIHNoaWZ0U2NhbGFyOiBudW1iZXIpIHtcbiAgICAvLyB3fiAzLjMuMiAoOClcbiAgICB2YXIgc2hpZnRpbmdzID0gbmV3IEZsb2F0NjRBcnJheSh3Zy5sZW5ndGgpO1xuICAgIHZhciB3biA9IG5ldyBGbG9hdDY0QXJyYXkod2cubGVuZ3RoKTtcblxuICAgIHZhciBpbnRQYXJ0ID0gc2hpZnRTY2FsYXIgfCAwO1xuICAgIHZhciBkZWNpbWFsUGFydCA9IHNoaWZ0U2NhbGFyIC0gaW50UGFydDtcblxuICAgIHNoaWZ0aW5nc1tpbnRQYXJ0ICUgc2hpZnRpbmdzLmxlbmd0aF0gPSAxIC0gZGVjaW1hbFBhcnQ7XG4gICAgc2hpZnRpbmdzWyhpbnRQYXJ0ICsgMSkgJSBzaGlmdGluZ3MubGVuZ3RoXSA9IGRlY2ltYWxQYXJ0O1xuXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHduLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYWN1bSA9IDA7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHduLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICgoaSAtIGopIDwgMClcbiAgICAgICAgICBhY3VtICs9IHdnW2pdICogc2hpZnRpbmdzW3NoaWZ0aW5ncy5sZW5ndGggLSBNYXRoLmFicyhpIC0gaildO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgYWN1bSArPSB3Z1tqXSAqIHNoaWZ0aW5nc1soaSAtIGopICUgc2hpZnRpbmdzLmxlbmd0aF07XG4gICAgICB9XG4gICAgICB3bltpXSA9IGFjdW07XG4gICAgfVxuXG4gICAgcmV0dXJuIHduO1xuICB9XG5cbiAgc3RhdGljIG5vcm1hbGl6ZVNoaWZ0KHNoaWZ0OiBGbG9hdDY0QXJyYXkpIHtcbiAgICB2YXIgc3VtID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoaWZ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBzdW0gKz0gc2hpZnRbaV07XG4gICAgfVxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2hpZnQubGVuZ3RoOyBqKyspIHtcbiAgICAgIHNoaWZ0W2pdIC89IHN1bTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdmVjdG9ySW52ZXJ0ZWRTaGlmdGluZyh3ZzogRmxvYXQ2NEFycmF5LCBzaGlmdGluZ3M6IFN5bmFwdGljLklOdW1lcmljQXJyYXkpIHtcbiAgICAvLyB3fiAzLjMuMiAoOClcblxuICAgIFxuICAgIHZhciByZXQgPSBuZXcgRmxvYXQ2NEFycmF5KHdnLmxlbmd0aCk7XG5cbiAgICB2YXIgY29ycmltaWVudG9JbmRleCA9IC0oKHNoaWZ0aW5ncy5sZW5ndGggLSAxKSAvIDIpIHwgMDtcblxuICAgIHZhciBjaXJjdWxhbnRNYXRyaXggPSBVdGlscy5idWlsZENpcmN1bGFudE1hdHJpeCh3Zy5sZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Zy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3Zy5sZW5ndGg7IHgrKykge1xuICAgICAgICB2YXIgdG1wID0gMDtcblxuICAgICAgICBmb3IgKHZhciBzaGlmdCA9IDA7IHNoaWZ0IDwgc2hpZnRpbmdzLmxlbmd0aDsgc2hpZnQrKykge1xuXG4gICAgICAgICAgdmFyIG1hdFJvdyA9IGkgLSB4ICsgY29ycmltaWVudG9JbmRleCArIHNoaWZ0O1xuXG4gICAgICAgICAgaWYgKG1hdFJvdyA8IDApXG4gICAgICAgICAgICBtYXRSb3cgKz0gd2cubGVuZ3RoO1xuICAgICAgICAgIGlmIChtYXRSb3cgPCAwKVxuICAgICAgICAgICAgbWF0Um93ICs9IHdnLmxlbmd0aDtcbiAgICAgICAgICBtYXRSb3cgJT0gd2cubGVuZ3RoO1xuXG4gICAgICAgICAgdG1wICs9IHdnW2NpcmN1bGFudE1hdHJpeFt4XVttYXRSb3ddXSAqIHNoaWZ0aW5nc1tzaGlmdF07XG4gICAgICAgIH1cblxuICAgICAgICByZXRbaV0gPSB0bXA7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICB3Zy5zZXQocmV0KTtcbiAgfVxuXG4gIHN0YXRpYyBpbml0UmFuZG9tU29mdG1heEFycmF5KGFycmF5OiBGbG9hdDY0QXJyYXkpOiB2b2lkIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcnJheVtpXSA9IE1hdGgucmFuZG9tKCk7XG4gICAgfVxuXG4gICAgVXRpbHMuc29mdE1heChhcnJheSk7XG4gIH1cblxuICBzdGF0aWMgYnVpbGRDaXJjdWxhbnRNYXRyaXgobGVuZ3RoOiBudW1iZXIsIG9mZnNldDogbnVtYmVyID0gMCk6IEZsb2F0NjRBcnJheVtdIHtcbiAgICB2YXIgcmV0ID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYXJyID0gbmV3IEZsb2F0NjRBcnJheShsZW5ndGgpO1xuICAgICAgcmV0LnB1c2goYXJyKTtcbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbGVuZ3RoOyBuKyspIHtcbiAgICAgICAgYXJyW25dID0gKChpICsgbikgJSBsZW5ndGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBOVE0gZXh0ZW5kcyBuZXR3b3JrLk5ldHdvcmsge1xuICB0cmFpbmVyOiB0cmFpbmVyLlRyYWluZXI7XG5cbiAgZGF0YTogRmxvYXQ2NEFycmF5W107XG5cbiAgYmxvY2tXaWR0aDogbnVtYmVyO1xuICBibG9ja3M6IG51bWJlcjtcblxuICBoZWFkczogSGVhZFtdID0gbmV3IEFycmF5KCk7XG5cbiAgaW5wdXRWYWx1ZXM6IEZsb2F0NjRBcnJheTtcblxuICBpbnB1dExheWVyOiBMYXllci5MYXllcjtcbiAgaGlkZGVuTGF5ZXI6IExheWVyLkxheWVyO1xuICBvdXRwdXRMYXllcjogTGF5ZXIuTGF5ZXI7XG5cbiAgZGlydHkgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihpbnB1dHM6IG51bWJlciwgb3V0cHV0czogbnVtYmVyLCBtZW1CbG9ja3M6IG51bWJlciwgYmxvY2tXaWR0aDogbnVtYmVyLCBoZWFkczogbnVtYmVyLCBoaWRkZW5TaXplOiBudW1iZXIpIHtcbiAgICAvLyBidWlsZCB0aGUgbWVtb3J5XG4gICAgXG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMudHJhaW5lciA9IG5ldyB0cmFpbmVyLlRyYWluZXIodGhpcyk7XG5cbiAgICB0aGlzLmJsb2NrcyA9IG1lbUJsb2NrcztcbiAgICB0aGlzLmJsb2NrV2lkdGggPSBibG9ja1dpZHRoO1xuXG4gICAgdGhpcy5kYXRhID0gbmV3IEFycmF5KHRoaXMuYmxvY2tzKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5kYXRhLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdGhpcy5kYXRhW2luZGV4XSA9IG5ldyBGbG9hdDY0QXJyYXkoYmxvY2tXaWR0aCk7XG5cbiAgICB9XG5cbiAgICB0aGlzLmNsZWFuKCk7XG4gICAgXG4gICAgLy8gYnVpbGQgdGhlIG5ldHdvcmtcbiAgICBcbiAgICB2YXIgaW5wdXRMZW5ndGggPSBpbnB1dHMgKyBoZWFkcyAqIG1lbUJsb2NrcztcblxuICAgIHRoaXMuaW5wdXRWYWx1ZXMgPSBuZXcgRmxvYXQ2NEFycmF5KGlucHV0TGVuZ3RoKTtcblxuICAgIHRoaXMubGF5ZXJzLmlucHV0ID0gdGhpcy5pbnB1dExheWVyID0gbmV3IExheWVyLkxheWVyKGlucHV0TGVuZ3RoKTtcbiAgICB0aGlzLmhpZGRlbkxheWVyID0gbmV3IExheWVyLkxheWVyKGhpZGRlblNpemUpO1xuICAgIHRoaXMubGF5ZXJzLm91dHB1dCA9IHRoaXMub3V0cHV0TGF5ZXIgPSBuZXcgTGF5ZXIuTGF5ZXIob3V0cHV0cyk7XG5cblxuXG4gICAgdGhpcy5pbnB1dExheWVyLnByb2plY3QodGhpcy5oaWRkZW5MYXllciwgTGF5ZXIuTGF5ZXIuY29ubmVjdGlvblR5cGUuQUxMX1RPX0FMTCk7XG4gICAgdGhpcy5oaWRkZW5MYXllci5wcm9qZWN0KHRoaXMub3V0cHV0TGF5ZXIsIExheWVyLkxheWVyLmNvbm5lY3Rpb25UeXBlLkFMTF9UT19BTEwpO1xuXG4gICAgdmFyIGlucHV0Q291bnRlciA9IGlucHV0cyAtIDE7XG5cbiAgICBmb3IgKHZhciBoZWFkSW5kZXggPSAwOyBoZWFkSW5kZXggPCBoZWFkczsgaGVhZEluZGV4KyspIHtcbiAgICAgIHRoaXMuYWRkSGVhZCh0aGlzLmlucHV0VmFsdWVzLnN1YmFycmF5KGlucHV0Q291bnRlciwgaW5wdXRDb3VudGVyICsgbWVtQmxvY2tzKSk7XG4gICAgICBpbnB1dENvdW50ZXIgKz0gbWVtQmxvY2tzO1xuICAgIH1cblxuICAgIHRoaXMub3B0aW1pemVkID0gZmFsc2U7XG4gIH1cblxuICBjbGVhbigpIHtcbiAgICBmb3IgKHZhciBsb2NhdGlvbiA9IDA7IGxvY2F0aW9uIDwgdGhpcy5ibG9ja3M7IGxvY2F0aW9uKyspIHtcbiAgICAgIFV0aWxzLmluaXRSYW5kb21Tb2Z0bWF4QXJyYXkodGhpcy5kYXRhW2xvY2F0aW9uXSk7XG4gICAgfVxuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgfVxuXG4gIGFjdGl2YXRlKGlucHV0OiBTeW5hcHRpYy5JTnVtZXJpY0FycmF5KSB7XG4gICAgdGhpcy5pbnB1dFZhbHVlcy5zZXQoPGFueT5pbnB1dCk7XG5cbiAgICB0aGlzLmlucHV0TGF5ZXIuYWN0aXZhdGUodGhpcy5pbnB1dFZhbHVlcyk7XG4gICAgdGhpcy5oaWRkZW5MYXllci5hY3RpdmF0ZSgpO1xuXG4gICAgdGhpcy5kb1RpbWVTdGVwKCk7XG5cbiAgICByZXR1cm4gdGhpcy5vdXRwdXRMYXllci5hY3RpdmF0ZSgpO1xuICB9XG5cbiAgcHJvcGFnYXRlKHJhdGU6IG51bWJlciwgdGFyZ2V0OiBTeW5hcHRpYy5JTnVtZXJpY0FycmF5KSB7XG4gICAgdGhpcy5vdXRwdXRMYXllci5wcm9wYWdhdGUocmF0ZSwgdGFyZ2V0KTtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5oZWFkcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGhpcy5oZWFkc1tpXS5sYXllci5wcm9wYWdhdGUocmF0ZSk7XG4gICAgfVxuICAgIHRoaXMuaGlkZGVuTGF5ZXIucHJvcGFnYXRlKHJhdGUpO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9XG5cbiAgYWRkSGVhZChzdWJBcnJheTogRmxvYXQ2NEFycmF5KTogSGVhZCB7XG4gICAgdmFyIGhlYWQgPSBuZXcgSGVhZCh0aGlzLCBzdWJBcnJheSk7XG4gICAgdGhpcy5oZWFkcy5wdXNoKGhlYWQpO1xuICAgIHJldHVybiBoZWFkO1xuICB9XG5cbiAgZG9UaW1lU3RlcCgpIHtcbiAgICB0aGlzLmhlYWRzLmZvckVhY2goKGhlYWQsIGhlYWRJbmRleCkgPT4ge1xuICAgICAgaGVhZC5kb1RpbWVTdGVwKCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gcGFyYWxsZWxpemFibGVcbiAgICB0aGlzLmhlYWRzLmZvckVhY2goKGhlYWQsIGhlYWRJbmRleCkgPT4ge1xuICAgICAgdGhpcy5kb0VyYXNlKGhlYWQud193ZWlnaHRpbmdzLCBoZWFkLmVyYXNlR2F0ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gcGFyYWxsZWxpemFibGVcbiAgICB0aGlzLmhlYWRzLmZvckVhY2goKGhlYWQsIGhlYWRJbmRleCkgPT4ge1xuICAgICAgdGhpcy5kb0FkZChoZWFkLndfd2VpZ2h0aW5ncywgaGVhZC5hZGRHYXRlKTtcbiAgICB9KTtcbiAgICBcbiAgICAvL3RoaXMuZGF0YS5mb3JFYWNoKChlKSA9PiBlID0gVXRpbHMuc29mdE1heChlKSlcbiAgfVxuXG4gIGRvQWRkKHc6IFN5bmFwdGljLklOdW1lcmljQXJyYXksIGFkZEdhdGU6IFN5bmFwdGljLklOdW1lcmljQXJyYXkpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IHRoaXMuYmxvY2tzOyBuKyspIHtcbiAgICAgIHZhciBNID0gdGhpcy5kYXRhW25dO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJsb2NrV2lkdGg7IGkrKykge1xuICAgICAgICBNW2ldICs9IGFkZEdhdGVbbl0gKiB3W2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRvRXJhc2UodzogU3luYXB0aWMuSU51bWVyaWNBcnJheSwgZXJhc2VHYXRlOiBTeW5hcHRpYy5JTnVtZXJpY0FycmF5KSB7XG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLmJsb2NrczsgbisrKSB7XG4gICAgICB2YXIgTSA9IHRoaXMuZGF0YVtuXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1dpZHRoOyBpKyspIHtcbiAgICAgICAgTVtpXSAqPSAxIC0gZXJhc2VHYXRlW25dICogd1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBIZWFkIHtcbiAgc3RhdGljIEFERElUSU9OQUxfSU5QVVRfVkFMVUVTID0gMztcblxuICBtZW1vcnk6IE5UTTtcblxuICB3X3dlaWdodGluZ3M6IEZsb2F0NjRBcnJheTtcbiAgZXJhc2VHYXRlOiBGbG9hdDY0QXJyYXk7XG4gIGFkZEdhdGU6IEZsb2F0NjRBcnJheTtcbiAga19rZXlzOiBGbG9hdDY0QXJyYXk7XG4gIGdfaW50ZXJwb2xhdGlvbjogbnVtYmVyO1xuICBZX2ZvY3VzOiBudW1iZXI7XG4gIHNfc2hpZnRpbmdWYWx1ZTogbnVtYmVyID0gbnVsbDtcbiAgc19zaGlmdGluZ1ZlY3RvcjogRmxvYXQ2NEFycmF5O1xuICB3Y19mb2N1c2VkV2VpZ2h0czogRmxvYXQ2NEFycmF5O1xuICByZWFkVmVjdG9yOiBGbG9hdDY0QXJyYXk7XG4gIMOfX2tleVN0cmVuZ3RoOiBudW1iZXI7XG4gIHByZXZGb2N1czogbnVtYmVyID0gMTtcblxuICBzaGlmdExlbmd0aDogbnVtYmVyO1xuXG4gIGxheWVyOiBMYXllci5MYXllcjtcblxuICBjaXJjdWxhbnRNYXRyaXg6IEZsb2F0NjRBcnJheVtdO1xuXG4gIGNvbnN0cnVjdG9yKG1lbW9yeTogTlRNLCBkZXN0aW5hdGlvbkFycmF5PzogRmxvYXQ2NEFycmF5KSB7XG4gICAgdGhpcy5tZW1vcnkgPSBtZW1vcnk7XG4gICAgdGhpcy53Y19mb2N1c2VkV2VpZ2h0cyA9IG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkuYmxvY2tzKTtcbiAgICB0aGlzLndfd2VpZ2h0aW5ncyA9IG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkuYmxvY2tzKTtcblxuICAgIFV0aWxzLmluaXRSYW5kb21Tb2Z0bWF4QXJyYXkodGhpcy53X3dlaWdodGluZ3MpO1xuXG4gICAgdGhpcy5zaGlmdExlbmd0aCA9IDM7IC8vdGhpcy5tZW1vcnkuYmxvY2tzO1xuXG4gICAgdGhpcy5zX3NoaWZ0aW5nVmVjdG9yID0gbmV3IEZsb2F0NjRBcnJheSh0aGlzLnNoaWZ0TGVuZ3RoKTtcbiAgICB0aGlzLmtfa2V5cyA9IG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkuYmxvY2tXaWR0aCk7XG4gICAgdGhpcy7Dn19rZXlTdHJlbmd0aCA9IDA7XG4gICAgdGhpcy5lcmFzZUdhdGUgPSBuZXcgRmxvYXQ2NEFycmF5KHRoaXMubWVtb3J5LmJsb2Nrcyk7XG4gICAgdGhpcy5hZGRHYXRlID0gbmV3IEZsb2F0NjRBcnJheSh0aGlzLm1lbW9yeS5ibG9ja3MpO1xuICAgIHRoaXMucmVhZFZlY3RvciA9IGRlc3RpbmF0aW9uQXJyYXkgfHwgbmV3IEZsb2F0NjRBcnJheSh0aGlzLm1lbW9yeS5ibG9ja3MpO1xuXG4gICAgdGhpcy5sYXllciA9IG5ldyBMYXllci5MYXllcih0aGlzLm1lbW9yeS5ibG9ja1dpZHRoICsgdGhpcy5tZW1vcnkuYmxvY2tzICogMyArIEhlYWQuQURESVRJT05BTF9JTlBVVF9WQUxVRVMgKyB0aGlzLnNoaWZ0TGVuZ3RoKTtcblxuICAgIHRoaXMubWVtb3J5LmhpZGRlbkxheWVyLnByb2plY3QodGhpcy5sYXllciwgTGF5ZXIuTGF5ZXIuY29ubmVjdGlvblR5cGUuQUxMX1RPX0FMTCk7XG4gICAgdGhpcy5sYXllci5wcm9qZWN0KHRoaXMubWVtb3J5Lm91dHB1dExheWVyLCBMYXllci5MYXllci5jb25uZWN0aW9uVHlwZS5BTExfVE9fQUxMKTtcblxuICAgIHRoaXMuY2lyY3VsYW50TWF0cml4ID0gVXRpbHMuYnVpbGRDaXJjdWxhbnRNYXRyaXgodGhpcy5tZW1vcnkuYmxvY2tzKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZFBhcmFtcyhhY3RpdmF0aW9uOiBGbG9hdDY0QXJyYXkpIHtcblxuICAgIHRoaXMuw59fa2V5U3RyZW5ndGggPSBTcXVhc2guU09GVFBMVVMoYWN0aXZhdGlvblswXSk7XG4gICAgdGhpcy5nX2ludGVycG9sYXRpb24gPSBTcXVhc2guTE9HSVNUSUMoYWN0aXZhdGlvblsxXSk7XG4gICAgdGhpcy5ZX2ZvY3VzID0gTWF0aC5sb2coTWF0aC5leHAoYWN0aXZhdGlvblsyXSArIDEpKSArIDE7Ly9TcXVhc2guU09GVFBMVVMoYWN0aXZhdGlvblsyXSkgKyAxO1xuXG4gICAgdmFyIHN0YXJ0QXQgPSAzO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5rX2tleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHRoaXMua19rZXlzW2tdID0gdGhpcy5sYXllci5saXN0W2sgKyBzdGFydEF0XS5hY3RpdmF0aW9uO1xuICAgIH1cblxuICAgIHN0YXJ0QXQgKz0gdGhpcy5rX2tleXMubGVuZ3RoO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5hZGRHYXRlLmxlbmd0aDsgaysrKSB7XG4gICAgICB0aGlzLmFkZEdhdGVba10gPSB0aGlzLmxheWVyLmxpc3RbayArIHN0YXJ0QXRdLmRlcml2YXRpdmU7XG4gICAgfVxuXG4gICAgc3RhcnRBdCArPSB0aGlzLmFkZEdhdGUubGVuZ3RoO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5lcmFzZUdhdGUubGVuZ3RoOyBrKyspIHtcbiAgICAgIHRoaXMuZXJhc2VHYXRlW2tdID0gU3F1YXNoLkxPR0lTVElDKHRoaXMubGF5ZXIubGlzdFtrICsgc3RhcnRBdF0uYWN0aXZhdGlvbik7XG4gICAgfVxuXG4gICAgc3RhcnRBdCArPSB0aGlzLmVyYXNlR2F0ZS5sZW5ndGg7XG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLnNoaWZ0TGVuZ3RoOyBrKyspIHtcbiAgICAgIHRoaXMuc19zaGlmdGluZ1ZlY3RvcltrXSA9IHRoaXMubGF5ZXIubGlzdFtrICsgc3RhcnRBdF0uYWN0aXZhdGlvbjtcbiAgICB9XG5cbiAgICB2YXIgTSA9IHRoaXMubWVtb3J5LmRhdGE7XG4gICAgXG4gICAgLy8gZm9jdXMgYnkgY29udGVudCwgb2J0YWlucyBhbiBhcnJheSBvZiBzaW1pbGFyaXR5IGluZGV4ZXMgZm9yIGVhY2ggbWVtb3J5QmxvY2tcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE0ubGVuZ3RoOyBpKyspXG4gICAgICB0aGlzLndjX2ZvY3VzZWRXZWlnaHRzW2ldID0gVXRpbHMuZ2V0Q29zaW5lU2ltaWxhcml0eShNW2ldLCB0aGlzLmtfa2V5cyk7XG4gICAgXG4gICAgLy8gZm9jdXMgYnkgbG9jYXRpb24gKGludGVycG9sYXRpb24pXG4gICAgVXRpbHMuaW50ZXJwb2xhdGVBcnJheSh0aGlzLndjX2ZvY3VzZWRXZWlnaHRzLCB0aGlzLndfd2VpZ2h0aW5ncywgdGhpcy5nX2ludGVycG9sYXRpb24pO1xuICAgIFxuICAgIC8vIGNvbnZvbHV0aW9uYWwgc2hpZnRcbiAgICB0aGlzLmRvU2hpZnRpbmdzKCk7XG4gICAgIFxuICAgIC8vIHNoYXJwZW5pbmdcbiAgICBVdGlscy5zaGFycEFycmF5KHRoaXMud193ZWlnaHRpbmdzLCB0aGlzLndjX2ZvY3VzZWRXZWlnaHRzLCB0aGlzLllfZm9jdXMpO1xuICAgIFxuICAgIC8vIHNpbmNlIOKIkSB3ID0gMSwgd2UgaGF2ZSB0byBzb2Z0bWF4IHRoZSBhcnJheVxuICAgIFV0aWxzLnNvZnRNYXgodGhpcy53X3dlaWdodGluZ3MpO1xuICAgIFxuICAgIC8vLyB3ZSBnb3Qgd3QhXG4gIH1cblxuICBkb1NoaWZ0aW5ncygpIHtcbiAgICBVdGlscy5zb2Z0TWF4KHRoaXMuc19zaGlmdGluZ1ZlY3Rvcik7XG5cbiAgICBVdGlscy52ZWN0b3JJbnZlcnRlZFNoaWZ0aW5nKHRoaXMud2NfZm9jdXNlZFdlaWdodHMsIHRoaXMuc19zaGlmdGluZ1ZlY3Rvcik7XG4gIH1cblxuICBkb1RpbWVTdGVwKCkge1xuICAgIHZhciBhY3RpdmF0aW9uID0gdGhpcy5sYXllci5hY3RpdmF0ZSgpO1xuXG4gICAgdGhpcy5yZWFkUGFyYW1zKGFjdGl2YXRpb24pO1xuICAgIFxuICAgIC8vIHJlYWRpbmdcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5tZW1vcnkuYmxvY2tzOyBpbmRleCsrKSB7XG4gICAgICB0aGlzLnJlYWRWZWN0b3JbaW5kZXhdID0gMDtcbiAgICAgIGZvciAodmFyIGNlbGwgPSAwOyBjZWxsIDwgdGhpcy5tZW1vcnkuYmxvY2tXaWR0aDsgY2VsbCsrKSB7XG4gICAgICAgIHRoaXMucmVhZFZlY3RvcltpbmRleF0gKz0gdGhpcy5tZW1vcnkuZGF0YVtpbmRleF1bY2VsbF0gKiB0aGlzLndfd2VpZ2h0aW5nc1tpbmRleF07XG4gICAgICB9XG4gICAgfVxuICB9XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9